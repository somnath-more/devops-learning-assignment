name: Exploration of GitHub Actions

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
    types: [opened, synchronize, reopened]

jobs:
  action-workflow-explore:
    runs-on: ubuntu-latest
   
    env:
        MY_ENV_VAR: "Hello from env variable!"
    steps:
      - name: Print basic information
        run: |
          echo "Hello, GitHub Actions!"
          echo "Current repository owner: $GITHUB_REPOSITORY_OWNER"
          echo "Current repository: $GITHUB_REPOSITORY"
          echo "Current branch: $GITHUB_REF"
          echo "GitHub event name: $GITHUB_EVENT_NAME"
          echo "GitHub event payload: $GITHUB_EVENT_PATH"
          echo "GitHub actor: $GITHUB_ACTOR"
          echo "GitHub workspace: $GITHUB_WORKSPACE"
          echo "GitHub SHA: $GITHUB_SHA"


      - name: Print environment variables
        run: |
          env

      - name: Print GitHub token
        run: |
          echo "GitHub token: $GITHUB_TOKEN"

      - name: Print a secret
        run: |
          echo "My secret: ${{ secrets.MY_SECRET_NAME }}"
          echo "My USER SERVICE TOKEN: ${{ secrets.USER_SERVICE_TOKEN }}"
      - name: print a codespace secret
        run: |
             echo "My codespace secret: ${{ secrets.MY_CODESPACE_NAME }}"
      - name: print a variable token in secrets
        run: |
             echo "My variable token in secrets: ${{ secrets.MY_VARIABLE_NAME }}"
      - name: Runner details
        run: echo "🖥️ The workflow is now ready to test your code on the runner."
      - name: List files in the repository
        run: echo "🍏 This job's status is ${{ job.status }}."
#Explore Matrix
  example_matrix:
    runs-on: ubuntu-latest
    strategy:
        matrix:
            version: [10, 12, 14]
    needs: action-workflow-explore
    steps:
      - uses: actions/setup-node@v4
        with:
         node-version: ${{ matrix.version }}
         
#Explore Matrix
  action-workflow-advanced:
     if: github.actor == 'somnath-more' 
     runs-on: ubuntu-latest
     needs: 
       - action-workflow-explore
     steps:
      - name: Print basic information
        run: |
          echo "Hello, GitHub Actions!"
          echo "Current repository owner: $GITHUB_REPOSITORY_OWNER"
          echo "Current repository: $GITHUB_REPOSITORY"
  
      - name: Calculate Expression
        run: |
             expr 1 + 1 > output.log
             echo $((1 + 1)) > output_value.txt  # Store the calculated value in a text file
  
  example-job:
     name: Final Job Output!!
     runs-on: ubuntu-latest
     needs: 
       - example_matrix 
       - action-workflow-advanced
     steps:
       - name: Retrieve calculated value
         run: |
           cat $GITHUB_WORKSPACE/output_value.txt  # Retrieve the calculated value from the file